
mq
http://134.175.231.104:15672/#  /test/test
用了mq后，为了保证消息不丢，我这边先存数据库与事务一起提交，然后再扫数据库发送





# TTL（Time-To-Live)
RabbitMQ的TTL全称为Time-To-Live，表示的是消息的有效期。消息如果在队列中一直没有被消费并且存在时间超过了TTL，消息就会变成了"死信" (Dead Message)，
后续无法再被消费了。设置TTL有两种方式


* 第一种是声明队列的时候，在队列的属性中设置，这样该队列中的消息都会有相同的有效期；
* 第二种是发送消息时给消息设置属性，可以为每条消息都设置不同的TTL。
(如果两种方式都设置了，则以设置的较小的为准。)

死信 Dead Letter

>>>> 消息被否定确认，使用 channel.basicNack 或 channel.basicReject ，并且此时requeue 属性被设置为false。
>>>> 消息在队列的存活时间超过设置的TTL(Time-To-Live)时间。
>>>> 消息队列的消息数量已经超过最大队列长度。
那么该消息将成为“死信”。
“死信”消息会被RabbitMQ进行特殊处理，如果配置了死信队列信息，那么该消息将会被丢进死信队列中，如果没有配置，则该消息将会被丢弃。

























































